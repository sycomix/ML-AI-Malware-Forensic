import json
import pandas as pd
import os
from sklearn.datasets.base import Bunch
data=pd.read_csv('final_input', sep=",")


#print data


meta = {
	#'target_names':list(data.target_name.unique()),
	'targets':list(data.E.unique()),
	'features': list(data.columns[:-3])
}

with open('data/New_meta.json', 'w') as f:
	json.dump(meta, f, indent=2)


def load_data(root='data'):
	with open(os.path.join(root, 'New_meta.json'), 'r') as f:
		meta=json.load(f)
	names = meta['features']
#	print names[:-1]
	train = pd.read_csv(os.path.join(root,'final_input'), sep=",")
#	train=list(train)
	train = train.values
#	print train
	test = pd.read_csv(os.path.join(root,'test_file'), sep=',')
	print test

	test=test.values
#	print names[-1]
#	test=list(test)
	print test
	return Bunch(

	data=train[:,1 :-3],
	target=train[:,-1],
	data_test=test[:,3:],
	#target_test=test[:84,-1],
	#target_names=meta['target_names'],
	test_offset=test[:,0],
	test_Pname=test[:,1],
	test_PID=test[:,2],
	
	feature_names=meta['features'],
)

dataset=load_data()
#print dataset.feature_names
print dataset.test_PID
#dataset.target = int (dataset.target)
#print dataset.data[0]
#print dataset.target[0]
#print dataset.data_test
